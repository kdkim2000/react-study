# 04. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°í™”

---

## 1) ë¶€ëª¨-ìì‹ ì»´í¬ë„ŒíŠ¸ ë°ì´í„° ì „ë‹¬

### ë‹¨ë°©í–¥ ë°ì´í„° íë¦„(One-way Data Flow)

* **ìƒíƒœ(state)ëŠ” ì†Œìœ ì(ë¶€ëª¨)ì—ê²Œ ë‘ê³ **, ìì‹ì€ **propsë¡œ ë°ì´í„°**ì™€ \*\*ì½œë°±(ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬)\*\*ì„ ë°›ìŠµë‹ˆë‹¤.
* ìì‹ì´ ë¬´ì–¸ê°€ë¥¼ â€œë³€ê²½â€í•˜ê³  ì‹¶ë‹¤ë©´ **ë¶€ëª¨ê°€ ë‚´ë ¤ì¤€ ì½œë°±ì„ í˜¸ì¶œ**í•˜ì—¬ ë¶€ëª¨ ìƒíƒœë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.
  (Vueì—ì„œ `emit`ìœ¼ë¡œ ë¶€ëª¨ì—ê²Œ ì•Œë¦¬ë˜ íë¦„ê³¼ ìœ ì‚¬)

### êµ¬ì¡°í™” ì›ì¹™

1. **ìƒíƒœì˜ ì£¼ì¸ ì •í•˜ê¸°**: ì—¬ëŸ¬ ìì‹ì´ ê°™ì€ ë°ì´í„°ë¥¼ ì“°ë©´ **ê³µí†µ ë¶€ëª¨**ì— ìƒíƒœë¥¼ ë‘¡ë‹ˆë‹¤(ìƒíƒœ ëŒì–´ì˜¬ë¦¬ê¸°).
2. **ì‘ê²Œ ìª¼ê°œê¸°**: Presentational(ë³´ì´ëŠ” ê²ƒ) vs Container(ë°ì´í„°/ë¡œì§) ë¶„ë¦¬.
3. **ê³„ì•½ ëª…í™•í™”**: ì»´í¬ë„ŒíŠ¸ ê°„ ì¸í„°í˜ì´ìŠ¤(Props íƒ€ì…)ë¥¼ ëª…í™•íˆ ì •ì˜.

---

## 2) props drillingê³¼ ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©

### Props Drillingì´ë€?

* ê¹Šì€ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•˜ë ¤ê³  **ë¶€ëª¨ â†’ ì¤‘ê°„ â†’ ìì‹**ìœ¼ë¡œ ê°™ì€ propsë¥¼ **ì—¬ëŸ¬ ë‹¨ê³„** ë‚´ë ¤ ë³´ë‚´ëŠ” í˜„ìƒ.
* ë¬¸ì œ: **ì¬ì‚¬ìš©ì„±/ê°€ë…ì„± ì €í•˜**, ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ê°€ **ë¶ˆí•„ìš”í•œ ì±…ì„**ì„ ê°€ì§.

### ìµœì†Œí™” íŒ

* **ìƒíƒœ ìœ„ì¹˜ ì¬ê²€í† **: ë” ìœ„/ì•„ë˜ë¡œ ì˜®ê¸°ë©´ drillingì´ ì¤„ì–´ë“œëŠ”ì§€ í™•ì¸.
* **ì•¡ì…˜ ë²ˆë“¤ë§**: ì—¬ëŸ¬ í•¸ë“¤ëŸ¬ë¥¼ ê°ê° ë„˜ê¸°ì§€ ë§ê³  `actions`ë¼ëŠ” **ê°ì²´ë¡œ ë¬¶ì–´** ì „ë‹¬.
* **ì»´í¬ì§€ì…˜(Children & Compound Components)**: ë ˆì´ì•„ì›ƒì„ ë§¡ëŠ” ë˜í¼ê°€ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ì œì–´í•˜ì§€ ì•Šê²Œ.
* (ì˜ˆê³ ) ë” ë³µì¡í•˜ë©´ **Context**ë‚˜ ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë„ì…(ë‹¤ìŒ íŒŒíŠ¸ì—ì„œ).

---

## 3) ì‹¤ìŠµ: ê°„ë‹¨í•œ ToDo List (Vite + React + TypeScript)

### 3-1) í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (Vite)

```bash
# React + SWC + TypeScript í…œí”Œë¦¿
npm create vite@latest react-todo-ts -- --template react-swc-ts
cd react-todo-ts
npm install
npm run dev
```

### 3-2) í´ë” êµ¬ì¡°(ì˜ˆì‹œ)

```
src/
â”œâ”€ App.tsx
â”œâ”€ main.tsx
â””â”€ components/
   â”œâ”€ TodoApp.tsx
   â”œâ”€ TodoForm.tsx
   â”œâ”€ TodoList.tsx
   â”œâ”€ TodoItem.tsx
   â”œâ”€ TodoFilters.tsx
   â””â”€ EmptyState.tsx
```

---

### 3-3) íƒ€ì… ì„¤ê³„

* \*\*ë¶€ëª¨(TodoApp)\*\*ê°€ ìƒíƒœë¥¼ ì†Œìœ í•˜ê³ , ìì‹ë“¤ì€ **ë°ì´í„° + ì•¡ì…˜ ì½œë°±**ì„ propsë¡œ ë°›ìŠµë‹ˆë‹¤.

```ts
// src/components/TodoApp.tsx (ìƒë‹¨ì— í•¨ê»˜ ì„ ì–¸í•˜ê±°ë‚˜ ë³„ë„ types.tsë¡œ ë¶„ë¦¬ ê°€ëŠ¥)
export type Todo = {
  id: string;
  text: string;
  done: boolean;
  createdAt: number;
};

export type Filter = 'all' | 'active' | 'completed';

export type TodoActions = {
  add: (text: string) => void;
  toggle: (id: string) => void;
  remove: (id: string) => void;
  clearCompleted: () => void;
};
```

---

### 3-4) ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸ (ìƒíƒœì˜ ì£¼ì¸)

```tsx
// src/components/TodoApp.tsx
import { useMemo, useState } from 'react';
import { Todo, Filter, TodoActions } from './TodoApp.types'; // ìœ„ íƒ€ì…ì„ ë¶„ë¦¬í–ˆë‹¤ë©´ ì‚¬ìš©
import TodoForm from './TodoForm';
import TodoList from './TodoList';
import TodoFilters from './TodoFilters';
import EmptyState from './EmptyState';

function createTodo(text: string): Todo {
  return {
    id: crypto.randomUUID(),   // ë¸Œë¼ìš°ì € ì§€ì›. (êµ¬ë²„ì „ì€ uuid íŒ¨í‚¤ì§€ ì‚¬ìš©)
    text,
    done: false,
    createdAt: Date.now(),
  };
}

export default function TodoApp() {
  const [todos, setTodos] = useState<Todo[]>([]);
  const [filter, setFilter] = useState<Filter>('all');

  const actions: TodoActions = {
    add: (text: string) =>
      setTodos(prev => [createTodo(text), ...prev]),
    toggle: (id: string) =>
      setTodos(prev =>
        prev.map(t => (t.id === id ? { ...t, done: !t.done } : t))
      ),
    remove: (id: string) =>
      setTodos(prev => prev.filter(t => t.id !== id)),
    clearCompleted: () =>
      setTodos(prev => prev.filter(t => !t.done)),
  };

  const filtered = useMemo(() => {
    switch (filter) {
      case 'active':
        return todos.filter(t => !t.done);
      case 'completed':
        return todos.filter(t => t.done);
      default:
        return todos;
    }
  }, [todos, filter]);

  const completedCount = todos.filter(t => t.done).length;

  return (
    <section style={{ maxWidth: 520, margin: '0 auto', padding: 24 }}>
      <h1 style={{ marginBottom: 16 }}>ToDo List</h1>

      {/* ì…ë ¥(ìì‹) â† ë¶€ëª¨ ì•¡ì…˜ ì¤‘ addë§Œ ì „ë‹¬ */}
      <TodoForm onAdd={actions.add} />

      {/* í•„í„°(ìì‹) â† í˜„ì¬ í•„í„°ì™€ ë³€ê²½ ì½œë°± ì „ë‹¬ */}
      <TodoFilters
        current={filter}
        onChange={setFilter}
        onClearCompleted={actions.clearCompleted}
        completedCount={completedCount}
      />

      {/* ëª©ë¡(ìì‹) â† ë°ì´í„°ì™€ toggle/remove ì•¡ì…˜ ë²ˆë“¤ ì „ë‹¬ */}
      {filtered.length > 0 ? (
        <TodoList todos={filtered} actions={actions} />
      ) : (
        <EmptyState />
      )}
    </section>
  );
}
```

> í¬ì¸íŠ¸
>
> * **ë¶€ëª¨ê°€ ìƒíƒœ ì†Œìœ **: `todos`, `filter`
> * **ìì‹ì€ UI + ì´ë²¤íŠ¸ ì•Œë¦¼**: add/toggle/remove/clearë¥¼ **ì½œë°±ìœ¼ë¡œ í˜¸ì¶œ**
> * **Props Drilling ì™„í™”**: `actions` ê°ì²´ë¡œ ë¬¶ì–´ í•˜ìœ„ë¡œ ì „ë‹¬

---

### 3-5) ì…ë ¥ í¼ (Controlled Component)

```tsx
// src/components/TodoForm.tsx
import { useState } from 'react';

type Props = {
  onAdd: (text: string) => void;
};

export default function TodoForm({ onAdd }: Props) {
  const [text, setText] = useState<string>('');

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    const value = text.trim();
    if (!value) return;
    onAdd(value);
    setText('');
  };

  return (
    <form onSubmit={handleSubmit} style={{ display: 'flex', gap: 8 }}>
      <input
        value={text}
        onChange={(e) => setText(e.target.value)}
        placeholder="í•  ì¼ì„ ì…ë ¥ í›„ Enter"
        aria-label="ìƒˆ í•  ì¼"
        style={{ flex: 1 }}
      />
      <button type="submit">ì¶”ê°€</button>
    </form>
  );
}
```

---

### 3-6) í•„í„°/ìƒíƒœ ì •ë³´

```tsx
// src/components/TodoFilters.tsx
import type { Filter } from './TodoApp'; // í˜¹ì€ ë³„ë„ types import

type Props = {
  current: Filter;
  onChange: (f: Filter) => void;
  onClearCompleted: () => void;
  completedCount: number;
};

const filters: Filter[] = ['all', 'active', 'completed'];

export default function TodoFilters({
  current, onChange, onClearCompleted, completedCount
}: Props) {
  return (
    <div style={{ display: 'flex', gap: 8, alignItems: 'center', margin: '12px 0' }}>
      <div style={{ display: 'flex', gap: 4 }}>
        {filters.map(f => (
          <button
            key={f}
            onClick={() => onChange(f)}
            aria-pressed={current === f}
            style={{
              padding: '4px 8px',
              border: current === f ? '2px solid #333' : '1px solid #ccc',
              borderRadius: 8
            }}
          >
            {f}
          </button>
        ))}
      </div>
      <span style={{ marginLeft: 'auto', fontSize: 12, color: '#666' }}>
        ì™„ë£Œ: {completedCount}
      </span>
      <button onClick={onClearCompleted}>ì™„ë£Œ ì‚­ì œ</button>
    </div>
  );
}
```

---

### 3-7) ëª©ë¡ & ì•„ì´í…œ

```tsx
// src/components/TodoList.tsx
import type { Todo, TodoActions } from './TodoApp';
import TodoItem from './TodoItem';

type Props = {
  todos: Todo[];
  actions: Pick<TodoActions, 'toggle' | 'remove'>; // í•„ìš”í•œ ì•¡ì…˜ë§Œ ë‚´ë ¤ë„ OK
};

export default function TodoList({ todos, actions }: Props) {
  return (
    <ul style={{ listStyle: 'none', padding: 0, margin: 0, display: 'grid', gap: 8 }}>
      {todos.map(todo => (
        <TodoItem key={todo.id} todo={todo} actions={actions} />
      ))}
    </ul>
  );
}
```

```tsx
// src/components/TodoItem.tsx
import type { Todo, TodoActions } from './TodoApp';

type Props = {
  todo: Todo;
  actions: Pick<TodoActions, 'toggle' | 'remove'>;
};

export default function TodoItem({ todo, actions }: Props) {
  return (
    <li
      style={{
        border: '1px solid #eee',
        borderRadius: 8,
        padding: 8,
        display: 'flex',
        alignItems: 'center',
        gap: 8
      }}
    >
      <input
        type="checkbox"
        checked={todo.done}
        onChange={() => actions.toggle(todo.id)}
        aria-label={`${todo.text} ì™„ë£Œ í† ê¸€`}
      />
      <span style={{ flex: 1, textDecoration: todo.done ? 'line-through' : 'none' }}>
        {todo.text}
      </span>
      <button onClick={() => actions.remove(todo.id)} aria-label="ì‚­ì œ">ğŸ—‘ï¸</button>
    </li>
  );
}
```

---

### 3-8) ë¹ˆ ìƒíƒœ ë·°(ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í”„ë ˆì  í…Œì´ì…”ë„ ì»´í¬ë„ŒíŠ¸)

```tsx
// src/components/EmptyState.tsx
type Props = {
  title?: string;
  description?: string;
};

export default function EmptyState({
  title = 'í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤',
  description = 'ìƒë‹¨ ì…ë ¥ì°½ì— ìƒˆ í•  ì¼ì„ ì¶”ê°€í•˜ì„¸ìš”.'
}: Props) {
  return (
    <div
      style={{
        border: '1px dashed #ccc',
        borderRadius: 12,
        padding: 24,
        textAlign: 'center',
        color: '#666',
        marginTop: 16
      }}
    >
      <h3 style={{ margin: 0 }}>{title}</h3>
      <p style={{ margin: '8px 0 0' }}>{description}</p>
    </div>
  );
}
```

---

### 3-9) ì§„ì…ì 

```tsx
// src/App.tsx
import TodoApp from './components/TodoApp';

export default function App() {
  return (
    <main style={{ fontFamily: 'system-ui', lineHeight: 1.5 }}>
      <TodoApp />
    </main>
  );
}
```

```tsx
// src/main.tsx
import { createRoot } from 'react-dom/client';
import App from './App';
import './index.css';

createRoot(document.getElementById('root')!).render(<App />);
```

> ì—¬ê¸°ê¹Œì§€ ì‹¤í–‰í•˜ë©´ **ì¶”ê°€/í† ê¸€/ì‚­ì œ/í•„í„°ë§/ì™„ë£Œ ì¼ê´„ ì‚­ì œ**ê¹Œì§€ ê°€ëŠ¥í•œ ê°„ë‹¨í•œ ToDoê°€ ì™„ì„±ë©ë‹ˆë‹¤.
>
> * **ë¶€ëª¨-ìì‹ ë°ì´í„° ì „ë‹¬**: `TodoApp` â†’ `TodoForm`, `TodoList`, `TodoFilters`
> * **props drilling ìµœì†Œí™”**: `actions` ë²ˆë“¤ ì „ë‹¬
> * **ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©**: `EmptyState`ëŠ” ë‹¤ë¥¸ ë¦¬ìŠ¤íŠ¸ í™”ë©´ì—ë„ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥

---

## 4) ì‹¤ìŠµ ë¯¸ì…˜ (Hands-on)

1. **í¸ì§‘(Editing) ê¸°ëŠ¥ ì¶”ê°€**

   * `TodoItem`ì— â€œí¸ì§‘â€ ë²„íŠ¼ì„ ì¶”ê°€í•˜ê³ , ì¸ë¼ì¸ ì…ë ¥ìœ¼ë¡œ ë‚´ìš© ìˆ˜ì • í›„ Enterë¡œ ì €ì¥.
   * íƒ€ì…: `edit: (id: string, text: string) => void`ë¥¼ `TodoActions`ì— ì¶”ê°€.

2. **ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì˜ì†í™”**

   * `useEffect`ë¡œ `todos` ë³€ê²½ ì‹œ `localStorage`ì— ì €ì¥, ì´ˆê¸° ë¡œë”© ë•Œ ë³µì›.
   * (íŒíŠ¸) JSON ì§ë ¬í™”/ì—­ì§ë ¬í™” + `try/catch`.

3. **ì„±ëŠ¥ ë¯¸ì„¸ ìµœì í™”**

   * `TodoItem`ì„ `React.memo`ë¡œ ê°ì‹¸ê³ , í•¸ë“¤ëŸ¬ëŠ” `useCallback`ìœ¼ë¡œ ë©”ëª¨ì´ì¦ˆ.
   * ë°”ë€ ì•„ì´í…œë§Œ ë¦¬ë Œë”ë˜ëŠ”ì§€ React DevToolsë¡œ í™•ì¸.

4. **í”„ë ˆì  í…Œì´ì…”ë„ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬**

   * `TodoList`ë¥¼ ë°ì´í„° ì—†ëŠ” â€œUI ì „ìš©â€ìœ¼ë¡œ ë³µì œ(ì˜ˆ: `TodoListView`), ìŠ¤í† ë¦¬ë¶ ë„ì…ì„ ê°€ì •í•˜ê³  ë‹¤ì–‘í•œ ìƒíƒœë¥¼ ë¯¸ë¦¬ë³´ê¸°.

---

## 5) ì˜ˆìƒ ì§ˆë¬¸(Q\&A)

**Q1. ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ ìƒíƒœë¥¼ ë¶€ëª¨ì— ë‘˜ì§€/ìì‹ì— ë‘˜ì§€ ê²°ì •í•˜ë‚˜ìš”?**
A. **ì—¬ëŸ¬ ìì‹ì´ ê³µìœ **í•˜ê±°ë‚˜ **ë¶€ëª¨ê°€ ì œì–´í•´ì•¼ í•˜ëŠ”** ë°ì´í„°ëŠ” ë¶€ëª¨ê°€ ì†Œìœ í•©ë‹ˆë‹¤. íŠ¹ì • ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œë§Œ ì“°ì´ë©´ ê·¸ **ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€**ì— ë‘ì„¸ìš”.

**Q2. props drillingì„ ì–¸ì œê¹Œì§€ ê°ë‚´í•˜ê³ , ì–¸ì œ Contextë¥¼ ì¨ì•¼ í•˜ë‚˜ìš”?**
A. 2\~3ë‹¨ê³„ ì •ë„ì—ì„œ ë¶ˆí¸ì´ ì»¤ì§€ê±°ë‚˜, ë™ì¼ ë°ì´í„°ë¥¼ **ë‹¤ìˆ˜ì˜ í•˜ìœ„ íŠ¸ë¦¬**ì— ë¿Œë ¤ì•¼ í•˜ë©´ Contextë¥¼ ê³ ë ¤í•©ë‹ˆë‹¤. ì´ë²ˆ ì¥ì€ **ì•¡ì…˜ ë²ˆë“¤ë§ê³¼ êµ¬ì¡° ì¬ê²€í† **ë¡œ ìš°ì„  ì™„í™”í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.

**Q3. `actions` ê°ì²´ë¡œ ë¬¶ëŠ” ë°©ì‹ì˜ ì¥ì ì€?**
A. ì „ë‹¬ propì˜ **ê°œìˆ˜ë¥¼ ì¤„ì—¬ ê°€ë…ì„±**ì´ ì¢‹ì•„ì§€ê³ , í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš” ì—†ëŠ” ì•¡ì…˜ì„ **ì„ íƒì ìœ¼ë¡œ Pick**í•´ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Q4. ë¦¬ìŠ¤íŠ¸ keyë¡œ indexë¥¼ ì“°ë©´ ë¬´ì—‡ì´ ë¬¸ì œì¸ê°€ìš”?**
A. í•­ëª© ì¶”ê°€/ì‚­ì œ/ì •ë ¬ ì‹œ **í‚¤ ì•ˆì •ì„±**ì´ ê¹¨ì ¸ ì˜ëª»ëœ ì¬ì‚¬ìš©/ë¦¬ë Œë”ë§ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ëŠ¥í•˜ë©´ **ê³ ìœ  id**ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

**Q5. ì…ë ¥ í¼ì€ ì™œ Controlledê°€ ê¶Œì¥ë˜ë‚˜ìš”?**
A. ê°’ì˜ ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›(SSOT)ì´ **state**ë¡œ ëª¨ì—¬ **ê²€ì¦/ì œì¶œ/ë¦¬ì…‹**ì„ ì²´ê³„ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
