# 13. ìŠ¤íƒ€ì¼ë§ê³¼ ë ˆì´ì•„ì›ƒ

## 1) ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼ & CSS-in-JS ê°œìš”

### ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼

* **ì „ì—­ CSS íŒŒì¼**(ì˜ˆ: `styles/globals.css`)ì„ `_app.tsx`ì—ì„œ í•œ ë²ˆë§Œ import.
* **CSS ë³€ìˆ˜**(ì»¬ëŸ¬/ê°„ê²©/í°íŠ¸)ë¥¼ `:root`ì— ì •ì˜í•˜ë©´ í…Œë§ˆ/ì¼ê´€ì„±ì´ ì¢‹ì•„ì§.
* ì¼ë¶€ ë¦¬ì…‹/ë…¸ë©€ë¼ì´ì¦ˆëŠ” ì „ì—­ì—, ì»´í¬ë„ŒíŠ¸ë³„ ìŠ¤íƒ€ì¼ì€ **ëª¨ë“ˆ/CSS-in-JS**ë¡œ.

### CSS-in-JS (styled-components ì˜ˆì‹œ)

* **ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ ìŠ¤íƒ€ì¼**ì„ TypeScript ì•ˆì—ì„œ ì„ ì–¸.
* **props ê¸°ë°˜ ì¡°ê±´ë¶€ ìŠ¤íƒ€ì¼**, **í…Œë§ˆ í† í°** ì£¼ì…ì´ ì‰½ê³ , ê³µìš© UIë¥¼ ë§Œë“¤ê¸° í¸í•¨.
* Next.jsì—ì„œëŠ” `next.config.js`ì—ì„œ `compiler.styledComponents`ë¥¼ í™œì„±í™”í•˜ë©´ SSRì— ì¹œí™”ì .

### ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸

* Pages Routerì—ì„œëŠ” **ê³µí†µ ë ˆì´ì•„ì›ƒ**ì„ `components/Layout.tsx`ë¡œ ë§Œë“¤ê³ 
  `_app.tsx`ì—ì„œ **ëª¨ë“  í˜ì´ì§€ë¥¼ ê°ì‹¸ê¸°** ë˜ëŠ” **getLayout íŒ¨í„´**ìœ¼ë¡œ í˜ì´ì§€ë³„ ë ˆì´ì•„ì›ƒì„ ë¶„ê¸°.

---

## 2) í”„ë¡œì íŠ¸ ìƒì„± & ì˜ì¡´ì„± (Next.js + TypeScript)

```bash
# Next.js + TS + Pages Router
npx create-next-app@latest next-layout-ts --ts --no-app
cd next-layout-ts

# CSS-in-JS (styled-components)
npm i styled-components
# (v6ëŠ” íƒ€ì… í¬í•¨, v5ë¥¼ ì“°ëŠ” í™˜ê²½ì´ë¼ë©´: npm i -D @types/styled-components)
```

**`next.config.js`** â€” styled-components ìµœì í™” í™œì„±í™”

```js
/** @type {import('next').NextConfig} */
const nextConfig = {
  compiler: { styledComponents: true },
};
module.exports = nextConfig;
```

---

## 3) ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼ ì‘ì„±

**`styles/globals.css`**

```css
:root{
  --bg: #ffffff;
  --fg: #0f172a;
  --muted: #64748b;
  --card: #ffffff;
  --border: #e2e8f0;
  --ring: 0 0 0 3px rgba(59,130,246,.3);
}

:root[data-theme="dark"]{
  --bg: #0b0f14;
  --fg: #e5e7eb;
  --muted: #9ca3af;
  --card: #0f1720;
  --border: #1f2937;
}

html, body, #__next { height: 100%; }
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
  line-height:1.5;
}

a{ color:inherit; text-decoration:none; }
button{
  border:1px solid var(--border);
  background:var(--card);
  color:var(--fg);
  border-radius:10px;
  padding:8px 12px;
  cursor:pointer;
}
button:focus{ outline: var(--ring) solid 0; box-shadow: var(--ring); }
.container{ max-width: 960px; margin:0 auto; padding: 16px; }
.card{
  background: var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
}
.small{ color:var(--muted); font-size:12px; }
```

---

## 4) ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ (Header/Footer ê³µí†µ)

**ë””ë ‰í„°ë¦¬**

```
src/
â”œâ”€ components/
â”‚  â”œâ”€ Layout.tsx
â”‚  â””â”€ Badge.tsx
â”œâ”€ pages/
â”‚  â”œâ”€ _app.tsx
â”‚  â”œâ”€ index.tsx
â”‚  â””â”€ about.tsx
â””â”€ styles/globals.css
```

**`src/components/Layout.tsx`**

```tsx
import Link from 'next/link';
import { useRouter } from 'next/router';
import styled, { css } from 'styled-components';
import { useEffect } from 'react';

const HeaderWrap = styled.header`
  border-bottom: 1px solid var(--border);
  background: var(--card);
`;
const HeaderInner = styled.div`
  display:flex; gap:12px; align-items:center;
  height:56px; 
`;
const Brand = styled.strong`font-size:18px;`;

const Nav = styled.nav`
  margin-left:auto; display:flex; gap:8px;
  a{
    padding:6px 10px; border-radius:10px; border:1px solid var(--border);
    &.active{ background:#111827; color:#fff; border-color:#111827; }
  }
`;

const Main = styled.main`min-height: calc(100vh - 56px - 56px);`;
const FooterWrap = styled.footer`
  border-top: 1px solid var(--border);
  height:56px; display:flex; align-items:center; color:var(--muted);
`;

type Props = { children: React.ReactNode };

export default function Layout({ children }: Props) {
  const { pathname } = useRouter();

  // (ì„ íƒ) ë‹¤í¬ëª¨ë“œ í† ê¸€ì„ ìœ„í•´, OS ì„¤ì •ì— ë§ì¶° ì´ˆê¸° themeì„ ì¡ëŠ” ì˜ˆì‹œ
  useEffect(() => {
    const m = window.matchMedia?.('(prefers-color-scheme: dark)');
    document.documentElement.setAttribute('data-theme', m?.matches ? 'dark' : 'light');
  }, []);

  return (
    <>
      <HeaderWrap>
        <div className="container">
          <HeaderInner>
            <Brand>Next Layout</Brand>
            <Nav>
              <Link href="/" className={pathname === '/' ? 'active' : ''}>Home</Link>
              <Link href="/about" className={pathname === '/about' ? 'active' : ''}>About</Link>
            </Nav>
          </HeaderInner>
        </div>
      </HeaderWrap>

      <Main>
        <div className="container">{children}</div>
      </Main>

      <FooterWrap>
        <div className="container small">Â© 2025 FE Chapter Â· ê³µí†µ ë ˆì´ì•„ì›ƒ ë°ëª¨</div>
      </FooterWrap>
    </>
  );
}
```

**ì‘ì€ CSS-in-JS ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œ**

**`src/components/Badge.tsx`**

```tsx
import styled, { css } from 'styled-components';

export const Badge = styled.span<{ tone?: 'indigo'|'red'|'cyan' }>`
  font-size:12px; padding:2px 8px; border-radius:999px;
  ${({ tone }) => {
    if (tone === 'red')   return css`background:#fee2e2; color:#991b1b;`;
    if (tone === 'cyan')  return css`background:#ecfeff; color:#155e75;`;
    return css`background:#eef2ff; color:#3730a3;`; // indigo default
  }}
`;
```

---

## 5) í˜ì´ì§€ & ì•± ì—”íŠ¸ë¦¬

**`src/pages/_app.tsx`**

```tsx
import type { AppProps } from 'next/app';
import '../styles/globals.css';
import Layout from '../components/Layout';

// í˜ì´ì§€ë³„ ë ˆì´ì•„ì›ƒì„ í—ˆìš©í•˜ëŠ” getLayout íŒ¨í„´ë„ ì§€ì›
export type NextPageWithLayout<P = {}, IP = P> = React.FC<P> & {
  getLayout?: (page: React.ReactElement) => React.ReactNode;
};
type AppPropsWithLayout = AppProps & { Component: NextPageWithLayout };

export default function MyApp({ Component, pageProps }: AppPropsWithLayout) {
  const getLayout = Component.getLayout ?? ((page) => <Layout>{page}</Layout>);
  return getLayout(<Component {...pageProps} />);
}
```

**`src/pages/index.tsx`**

```tsx
import { Badge } from '../components/Badge';

export default function Home() {
  return (
    <section className="card" style={{ display:'grid', gap:10 }}>
      <h1 style={{ margin:0 }}>ê³µí†µ ë ˆì´ì•„ì›ƒì´ ì ìš©ëœ í™ˆ</h1>
      <p className="small">Header/FooterëŠ” ëª¨ë“  í˜ì´ì§€ì—ì„œ ê³µìœ ë©ë‹ˆë‹¤.</p>
      <div style={{ display:'flex', gap:6 }}>
        <Badge>New</Badge>
        <Badge tone="red">Hot</Badge>
        <Badge tone="cyan">Beta</Badge>
      </div>
    </section>
  );
}
```

**`src/pages/about.tsx`**

```tsx
export default function About() {
  return (
    <section className="card" style={{ display:'grid', gap:8 }}>
      <h2 style={{ margin:0 }}>About</h2>
      <p className="small">ì´ í˜ì´ì§€ ì—­ì‹œ ë™ì¼í•œ ë ˆì´ì•„ì›ƒ(í—¤ë”/í‘¸í„°)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
    </section>
  );
}
```

> ì‹¤í–‰: `npm run dev` â†’ `http://localhost:3000`
> ê¸°ëŒ€: ëª¨ë“  í˜ì´ì§€ì— **Header/Footer**ê°€ ë¶™ê³ , ì¤‘ì•™ ì˜ì—­ì— í˜ì´ì§€ ì½˜í…ì¸ ê°€ ë“¤ì–´ê°€ëŠ” **ê³µí†µ ë ˆì´ì•„ì›ƒ**ì´ ë™ì‘í•©ë‹ˆë‹¤.

---

## 6) ì‹¤ìŠµ ë¯¸ì…˜ (Hands-on)

1. **ë ˆì´ì•„ì›ƒ ê·¸ë¦¬ë“œí™”**

   * ì‚¬ì´ë“œë°”ê°€ ìˆëŠ” 2ì—´ ë ˆì´ì•„ì›ƒìœ¼ë¡œ í™•ì¥(ì¢Œì¸¡ ê³ ì • ë„ˆë¹„, ìš°ì¸¡ ìœ ë™).
   * `Layout`ì— `children` ì™¸ì— `sidebar` propì„ ë°›ì•„ ë Œë”í•˜ê±°ë‚˜, `getLayout`ì„ ì´ìš©í•´ Aboutë§Œ 2ì—´ë¡œ êµ¬ì„±.

2. **Active Nav ê°•í™”**

   * í˜„ì¬ ê²½ë¡œê°€ í•˜ìœ„ê²½ë¡œ(`/posts/*`)ì—¬ë„ Blog íƒ­ì´ í™œì„±í™”ë˜ë„ë¡ `pathname.startsWith('/posts')` ë¡œì§ ì¶”ê°€.

3. **ë‹¤í¬ ëª¨ë“œ í† ê¸€ ë²„íŠ¼**

   * Headerì— â€œğŸŒ™/â˜€ï¸â€ í† ê¸€ ë²„íŠ¼ ì¶”ê°€ â†’ `document.documentElement.dataset.theme` í† ê¸€.
   * ë²„íŠ¼ í¬ì»¤ìŠ¤ ìŠ¤íƒ€ì¼ì„ ì „ì—­ CSS ë³€ìˆ˜(`--ring`)ë¡œ ë§ì¶”ê¸°.

4. **ë ˆì´ì•„ì›ƒ ë¶„ê¸°(getLayout íŒ¨í„´)**

   * ì‹ ê·œ í˜ì´ì§€ `pages/landing.tsx`ë¥¼ ë§Œë“¤ê³ , í•´ë‹¹ í˜ì´ì§€ì—ì„œë§Œ **í’€ë¸”ë¦¬ë“œ(í—¤ë” ì—†ëŠ”) ë ˆì´ì•„ì›ƒ**ì„ ì ìš©.

5. **SEO í—¤ë“œ êµ¬ì„±**

   * ê° í˜ì´ì§€ì— `next/head`ë¡œ `title`/`meta`ë¥¼ ì§€ì •. ê³µí†µ ê¸°ë³¸ê°’ì€ `_app` ë˜ëŠ” ì»¤ìŠ¤í…€ `_document`ì—ì„œ ì •ì˜.

---

## 7) ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ & ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

* **ì „ì—­ CSS ë‚¨ìš©**: ì»´í¬ë„ŒíŠ¸ë³„ ìŠ¤íƒ€ì¼ì€ **CSS ëª¨ë“ˆ/Styled-Components**ë¡œ ìº¡ìŠí™”í•˜ê³ , ì „ì—­ì—” í† í°/ë¦¬ì…‹ë§Œ.
* **ë§í¬ ìŠ¤íƒ€ì¼ë§ ì´ìŠˆ**: Nextì˜ `Link`ëŠ” `className`ì„ ì „ë‹¬í•˜ë¯€ë¡œ **í´ë˜ìŠ¤ í† ê¸€ ë°©ì‹**ì´ ë‹¨ìˆœí•©ë‹ˆë‹¤.
* **FOUC(ê¹œë¹¡ì„)**: ë‹¤í¬ ëª¨ë“œ ì´ˆê¸°ê°’ì€ **ìµœì´ˆ í˜ì¸íŠ¸ ì „** ì„¤ì •(ì˜ˆ: `_document` ìŠ¤í¬ë¦½íŠ¸, ë˜ëŠ” ì„œë²„ì—ì„œ `data-theme` ì„¸íŒ…)ìœ¼ë¡œ ì¤„ì´ê¸°.
* **ë ˆì´ì•„ì›ƒ ì¬ì‚¬ìš©**: í˜ì´ì§€ë³„ ë ˆì´ì•„ì›ƒì´ ë‹¤ì–‘í•˜ë©´ **getLayout íŒ¨í„´**ìœ¼ë¡œ ë¶„ê¸°í•´ `_app`ë¥¼ ê¹”ë”í•˜ê²Œ ìœ ì§€.

---

## 8) ì˜ˆìƒ ì§ˆë¬¸(Q\&A)

**Q1. Pages Router ëŒ€ì‹  App Routerë¥¼ ì“°ë©´ ë ˆì´ì•„ì›ƒì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?**
A. App Routerì—ì„  `app/layout.tsx`ê°€ **ì¤‘ì²© ë ˆì´ì•„ì›ƒ**ì„ ê³µì‹ ì§€ì›í•©ë‹ˆë‹¤. Pages RouterëŠ” `_app.tsx` + `getLayout` íŒ¨í„´ìœ¼ë¡œ ìœ ì‚¬í•œ êµ¬ì¡°ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.

**Q2. styled-components ë§ê³  Emotion/Tailwindì™€ë„ í•¨ê»˜ ì“¸ ìˆ˜ ìˆë‚˜ìš”?**
A. ê°€ëŠ¥í•©ë‹ˆë‹¤. íŒ€ í‘œì¤€/ë””ìì¸ í† í° ì „ëµì— ë”°ë¼ ì„ íƒí•˜ì„¸ìš”. ê³µí†µ ë ˆì´ì•„ì›ƒì€ ì–´ë–¤ ìŠ¤íƒ€ì¼ ë„êµ¬ë¡œë„ ë™ì¼í•œ íŒ¨í„´ì…ë‹ˆë‹¤.

**Q3. ë‹¤í¬ ëª¨ë“œ ìƒíƒœë¥¼ Contextë¡œ ëº„ê¹Œìš”?**
A. ì „ì—­ìœ¼ë¡œ ìì£¼ ì½ì§€ë§Œ ë“œë¬¼ê²Œ ë°”ë€ŒëŠ” ê°’ì´ë¼ë©´ **Context**ê°€ ì í•©í•©ë‹ˆë‹¤(ì´ì „ ì¥ ì°¸ê³ ). ì´ˆê¸° í˜ì¸íŠ¸ ì „ ìƒíƒœ ì£¼ì…ë§Œ ì£¼ì˜í•˜ì„¸ìš”.

**Q4. í˜ì´ì§€ë§ˆë‹¤ í—¤ë”ë¥¼ ìˆ¨ê¸°ê³  ì‹¶ìœ¼ë©´?**
A. í•´ë‹¹ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì— `getLayout`ì„ ì •ì˜í•˜ì—¬ `<Layout>`ì´ ì•„ë‹Œ **ëŒ€ì²´ ë ˆì´ì•„ì›ƒ**(í˜¹ì€ ë‹¨ë… í˜ì´ì§€)ì„ ë°˜í™˜í•˜ì„¸ìš”.

---

## (ë¶€ë¡) Vite(React)ë¡œ ë™ì¼ íŒ¨í„´ ë§›ë³´ê¸° â€” ì„ íƒ ì‹¤ìŠµ

> Next.jsê°€ ì•„ë‹Œ **React + Vite + TS**ì—ì„œ Header/Footer ê³µí†µ ë ˆì´ì•„ì›ƒì„ ì—°ìŠµí•˜ë ¤ë©´:

```bash
npm create vite@latest react-layout-ts -- --template react-swc-ts
cd react-layout-ts && npm i styled-components && npm run dev
```

* `src/App.tsx`ì—ì„œ `<Layout>`ë¡œ ê°ì‹¸ê³ , ë¼ìš°íŒ…ì€ `react-router-dom`ì„ ì¶”ê°€í•˜ì—¬ `Header/Footer + <Outlet>` íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ ë³¸ ì¥ì˜ ë ˆì´ì•„ì›ƒ ê°œë…ì„ ê·¸ëŒ€ë¡œ ì²´í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


