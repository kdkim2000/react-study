# 11. Next.js 소개와 환경 구축

## 1) Next.js란? (React와 차이점)

* **React**는 UI 라이브러리이고, 라우팅/빌드/SSR 등은 직접 구성해야 합니다.
* **Next.js**는 React 위에 **파일 기반 라우팅**, **SSR/SSG/ISR**, **API Routes**, **이미지 최적화**, **서버/클라이언트 컴포넌트(App Router)** 등을 통합 제공하는 **풀스택 프레임워크**입니다. ([Next.js][2])
* Next.js는 개발 서버/번들러로 **Turbopack**을 통합(옵션)하여 빠른 로컬 개발 경험을 제공합니다. ([Next.js][3])

> 이번 장은 학습 난이도를 고려해 **Pages Router**(전통적 방식)를 사용합니다. Pages Router는 `/pages` 폴더의 파일이 곧 URL이 되는 **파일 시스템 라우팅**을 제공합니다. ([Next.js][4])

---

## 2) 프로젝트 생성 (TypeScript + Pages Router)

### 사전 요구 사항

* \*\*Node.js 18.18+\*\*가 필요합니다. (macOS/Windows/WSL/Linux 지원) ([Next.js][5])

### 새 프로젝트 만들기

가장 빠른 방법은 **create-next-app** CLI를 쓰는 것입니다.

```bash
# TypeScript + Pages Router(대화형) 예시
npx create-next-app@latest next-pages-ts
# 프롬프트에서:
# - Would you like to use TypeScript? → Yes
# - Would you like to use App Router? (recommended) → No  ← Pages Router 사용
```

* 위 프롬프트는 공식 설치 가이드 흐름과 동일합니다. 비대화형으로는 `--ts`, `--no-app` 같은 플래그를 사용할 수 있습니다. ([Next.js][6])

> 참고: Next.js는 Vite가 아니라 `create-next-app`으로 시작합니다. (Next는 자체 번들러/도구 체인을 포함) ([Next.js][1])

---

## 3) Pages 디렉토리와 라우팅 기초

* `/pages` 아래의 파일명이 곧 경로가 됩니다. 예: `pages/about.tsx` → `/about`
* `pages/index.tsx`는 루트(`/`)에 매핑됩니다.
* 동적 라우팅: `pages/posts/[slug].tsx`처럼 대괄호를 쓰면 `slug` 파라미터를 받습니다. ([Next.js][4])

### 폴더 구조(예시)

```
next-pages-ts/
├─ pages/
│  ├─ index.tsx          # 홈
│  ├─ about.tsx          # 정적 페이지
│  └─ posts/
│     └─ [slug].tsx      # 동적 라우트(포스트 상세)
├─ public/               # 정적 파일
├─ styles/               # 전역/모듈 CSS
├─ next.config.js
└─ tsconfig.json
```

* 개발 서버 실행: `npm run dev` → 기본 `http://localhost:3000` (포트는 사용 중이면 자동 조정). ([Next.js][7])

---

## 4) 실습: Pages Router로 미니 블로그 시작하기

아래 코드는 **TypeScript** 기반 예제입니다.

### 4-1) 홈 페이지와 네비게이션

**`pages/index.tsx`**

```tsx
import Link from 'next/link';

export default function Home() {
  return (
    <main style={{ padding: 24 }}>
      <h1>Next.js Pages Router 데모</h1>
      <ul>
        <li><Link href="/about">About 페이지</Link></li>
        <li><Link href="/posts/hello-next">동적 라우트: /posts/hello-next</Link></li>
      </ul>
    </main>
  );
}
```

**`pages/about.tsx`**

```tsx
export default function About() {
  return (
    <main style={{ padding: 24 }}>
      <h2>About</h2>
      <p>Pages Router로 라우팅되는 정적 페이지 예시입니다.</p>
    </main>
  );
}
```

### 4-2) 동적 라우팅 + 정적 생성(SSG)

학습 편의를 위해 포스트 데이터를 파일로 두고 **정적 생성**을 시연합니다.

**`lib/posts.ts`** (새 파일)

```ts
export type Post = { slug: string; title: string; body: string };

export const POSTS: Post[] = [
  { slug: 'hello-next', title: 'Hello Next.js', body: 'Next.js Pages Router 시작!' },
  { slug: 'routing-basics', title: 'Routing Basics', body: '파일 기반 라우팅을 배워봅시다.' },
];

export function getAllSlugs() {
  return POSTS.map(p => p.slug);
}

export function getPostBySlug(slug: string) {
  return POSTS.find(p => p.slug === slug) ?? null;
}
```

**`pages/posts/[slug].tsx`**

```tsx
import type { GetStaticPaths, GetStaticProps, InferGetStaticPropsType } from 'next';
import Head from 'next/head';
import Link from 'next/link';
import { getAllSlugs, getPostBySlug, type Post } from '../../lib/posts';

type Props = { post: Post };

export default function PostPage({ post }: InferGetStaticPropsType<typeof getStaticProps>) {
  return (
    <main style={{ padding: 24 }}>
      <Head><title>{post.title}</title></Head>
      <Link href="/">{'←'} 홈</Link>
      <h1>{post.title}</h1>
      <p>{post.body}</p>
    </main>
  );
}

// 정적 경로 생성
export const getStaticPaths: GetStaticPaths = async () => {
  const paths = getAllSlugs().map(slug => ({ params: { slug } }));
  return { paths, fallback: false };
};

// 정적 props 주입
export const getStaticProps: GetStaticProps<Props> = async (ctx) => {
  const slug = ctx.params?.slug as string;
  const post = getPostBySlug(slug);
  if (!post) return { notFound: true };
  return { props: { post } };
};
```

> 핵심 포인트
>
> * \*\*`[slug].tsx`\*\*는 `/posts/:slug`를 의미합니다. ([Next.js][4])
> * Pages Router는 `getStaticProps/getStaticPaths/getServerSideProps` 등 **라우트 단위 데이터 패칭** API를 제공합니다. ([Next.js][8])

---

## 5) 실습 미션 (Hands-on)

1. **목록 페이지 추가**

   * `pages/posts/index.tsx`를 만들어 `POSTS` 목록을 링크와 함께 렌더링. (검색어 `?q=`를 쿼리스트링으로 받아 필터링 도전)

2. **메타데이터/SEO**

   * `Head` 컴포넌트로 `title`, `meta` 태그를 각 페이지에서 지정.

3. **스타일**

   * `styles/Home.module.css`를 만들고 `index.tsx`에 적용(CSS 모듈).
   * 또는 `styles/globals.css`로 공통 스타일 지정.

4. **SSG ↔ SSR 비교**

   * 상세 페이지를 `getServerSideProps`로 바꾸고 새로고침 시 서버 실행 흐름을 체험.

5. **정적 자산 활용**

   * `/public` 폴더에 이미지를 넣고 `<img src="/logo.png" />`로 사용해보기.

---

## 6) 자주 하는 실수 & 베스트 프랙티스

* **Vite로 Next.js를 시작하려 함** → Next는 \*\*`create-next-app`\*\*을 사용합니다. (Vite는 React/Vue 등 일반 SPA에) ([Next.js][1])
* **App Router/Pages Router 혼동** → 본 장은 **Pages** 중심. 최신 기능은 **App Router**에서 제공되며, 추후 장에서 비교 설명 예정. ([Next.js][9])
* **Node 버전 미스매치** → 설치 전에 **Node 18.18+** 확인. nvm으로 버전 전환 권장. ([Next.js][5])
* **라우트 파일명 실수** → 대괄호(`[]`)는 동적 세그먼트, `index.tsx`는 디렉터리 루트 경로. ([Next.js][4])

---

## 7) 예상 질문(Q\&A)

**Q1. 우리 팀은 Pages Router부터 시작해도 되나요?**
A. 됩니다. **Pages Router는 계속 지원**되며 안정적입니다. 다만 장기적으로는 App Router의 최신 기능(서버 컴포넌트, 레이아웃, 스트리밍 등)을 학습해 전환을 검토하는 것이 좋습니다. ([Next.js][4])

**Q2. Next.js에서 Vite를 쓸 수는 없나요?**
A. 공식적으로는 **Turbopack/Webpack**을 사용합니다. `next dev --turbo`로 Turbopack을 활성화할 수 있습니다. ([Next.js][3])

**Q3. TypeScript 설정은 자동인가요?**
A. `create-next-app`의 프롬프트(또는 `--ts`)로 **TS 프로젝트를 바로 생성**할 수 있습니다. ([Next.js][6])

**Q4. 데이터는 어디서 로딩하나요?**
A. Pages Router에선 `getStaticProps`, `getServerSideProps`, `getStaticPaths`를 사용합니다. (App Router에서는 `fetch`와 서버 컴포넌트, `Route Handlers` 등을 활용) ([Next.js][8])

---


[1]: https://nextjs.org/docs/app/api-reference/cli/create-next-app?utm_source=chatgpt.com "CLI: create-next-app | Next.js"
[2]: https://nextjs.org/docs?utm_source=chatgpt.com "Next.js Docs"
[3]: https://nextjs.org/docs/app/api-reference/turbopack?utm_source=chatgpt.com "API Reference: Turbopack | Next.js"
[4]: https://nextjs.org/docs/pages?utm_source=chatgpt.com "Next.js Docs: Pages Router | Next.js"
[5]: https://nextjs.org/docs/app/getting-started/installation?utm_source=chatgpt.com "Getting Started: Installation | Next.js"
[6]: https://nextjs.org/docs/14/getting-started/installation?utm_source=chatgpt.com "Getting Started: Installation | Next.js"
[7]: https://nextjs.org/docs/pages/getting-started/installation?utm_source=chatgpt.com "Getting Started: Installation | Next.js"
[8]: https://nextjs.org/docs/pages/guides?utm_source=chatgpt.com "Pages Router: Guides | Next.js"
[9]: https://nextjs.org/docs/app?utm_source=chatgpt.com "Next.js Docs: App Router | Next.js"
